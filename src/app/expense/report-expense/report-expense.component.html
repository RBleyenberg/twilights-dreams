<h1 class="page-header">Expense Report</h1>


<mat-grid-list #grid rowHeight="2:1" gutterSize="15">
  <mat-grid-tile>

    <h3 class="panel-title">Show report</h3>

    <form [formGroup]="reportForm" (ngSubmit)="getReport(reportForm.value)" novalidate autocomplete="off">
      <mat-radio-group [formControl]="report">
      <mat-radio-button type="radio" value="opt1" name="report">Current month</mat-radio-button>
      <mat-radio-button type="radio" value="opt2" name="report">Date Range</mat-radio-button>
        <mat-radio-button type="radio" value="opt3" name="report">All</mat-radio-button>
      </mat-radio-group>
      <mat-form-field class="date-picker-style">
        <input matInput [formControl]="startdt" [matDatepicker]="picker1" placeholder="Kies een datum">
        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>

      <mat-form-field class="date-picker-style">
        <input matInput [formControl]="enddt" [matDatepicker]="picker2" placeholder="Kies een datum">
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>



        <button type="submit" class="btn btn-primary" [disabled]="reportForm.invalid">Submit</button>

<pre>
  {{reportForm.value | json}}
</pre>
    </form>

  </mat-grid-tile>
  <mat-grid-tile>

    <div class="panel panel-danger" *ngIf="expenses && totalrows < 1">
      <div class="panel-heading">
        <h3 class="panel-title">No expense found</h3>
      </div>

      <div class="panel-body">
        It seems like you havn't entered any expense for the selected criteria. Please enter you expenses <a
        routerLink="/expense">here</a>.
      </div>
    </div>


    <div class="panel panel-default" *ngIf="expenses && totalrows > 0">
      <div class="panel-heading">
        <h3 class="panel-title">Expense report <i>{{reportTitle}}</i> <b>({{ exptotal?.total | currency: 'USD':true
          }})</b></h3>
      </div>
      <div class="panel-body">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
            <tr>
              <th width="10%"><a style="cursor:pointer" (click)="sortExpense('expensedate')">Date</a></th>
              <th width="20%"><a style="cursor:pointer" (click)="sortExpense('expensetype')">Account</a></th>
              <th width="40%">Description</th>
              <th width="10%" class="text-right"><a style="cursor:pointer"
                                                    (click)="sortExpense('expenseamt')">Amount</a></th>
              <th width="10%">Action</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor='let exp of expenses; let expIndex = index'>
              <td>{{ exp.expensedate | date: 'd MMM y'}}</td>
              <td>{{ exp.expensetype}}</td>
              <td>{{ exp.expensedesc}}</td>
              <td class="text-right">{{ exp.expenseamt | currency: 'USD':true }}</td>
              <td>
                <button type="button" class="btn-xs btn-info" aria-label="View" (click)="showExpense(exp._id)">
                  <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
                </button>
                <button type="button" class="btn-xs btn-danger" aria-label="Edit" (click)="editExpense(exp._id)">
                  <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </button>
                <button type="button" class="btn-xs btn-primary" aria-label="Delete"
                        (click)="confirmDel(expIndex, exp._id)">
                  <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </button>
              </td>
            </tr>

            </tbody>
          </table>
        </div>

        <div style="text-align:center" *ngIf="expenses && totalrows > 10">
          <nav aria-label="Page navigation">
            <ul class="pagination">
              <li *ngFor="let item of createPager(pgCounter); let idx = index">
                <a [ngClass]="{'selected': qpage == idx + 1 }" class="selected" style="cursor:pointer"
                   (click)="setPage(idx + 1)">{{ idx + 1 }}</a>
              </li>
            </ul>
          </nav>
        </div>

      </div>
    </div>

  </mat-grid-tile>
</mat-grid-list>

